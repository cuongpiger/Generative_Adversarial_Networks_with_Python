# Generate new user without password required

<hr>

- **Step 1**: Create file `add_new_user.sh` with the following content:
  ```bash
  ####################################################################################################
  # File: add_new_user.sh
  # Description: Add new user with `NOPASSWD:ALL`
  ####################################################################################################

  USER_NAME=$1
  SSH_PUBLIC_KEY=$2

  adduser --disabled-password --gecos "" $USER_NAME
  mkdir -p /home/$USER_NAME/.ssh && chmod 700 /home/$USER_NAME/.ssh
  echo $SSH_PUBLIC_KEY > /home/$USER_NAME/.ssh/authorized_keys

  chmod 600 /home/$USER_NAME/.ssh/authorized_keys
  chown -R $USER_NAME:$USER_NAME /home/$USER_NAME/.ssh/
  echo "$USER_NAME        ALL=(ALL)       NOPASSWD: ALL" >> /etc/sudoers.d/$USER_NAME
  ```

- **Step 2**: Grant execute permission for the file `add_new_user.sh`:
  ```bash
  chmod +x add_new_user.sh
  ```

- **Step 3**: Run the script with the following command:
  ```bash
  # Define the user name and the public key
  USER_NAME=<USER_NAME>
  SSH_PUBLIC_KEY=<SSH_PUBLIC_KEY>

  # Run the above file
  ./add_new_user.sh $USER_NAME $SSH_PUBLIC_KEY
  ```